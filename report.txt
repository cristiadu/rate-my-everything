
> @cristiadu/rate-my-everything@0.1.0 test /workspaces/rate-my-everything
> pnpm --parallel -r test

Scope: 2 of 3 workspace projects
api pretest$ docker compose -f compose.yaml down -v && docker compose -f compose.yaml up -d --wait-timeout 100 && sleep 5
ui test$ jest
api pretest:  Container postgres  Stopping
api pretest:  Container postgres  Stopped
api pretest:  Container postgres  Removing
api pretest:  Container postgres  Removed
api pretest:  Volume api_postgres_data  Removing
api pretest:  Network api_default  Removing
api pretest:  Volume api_postgres_data  Removed
api pretest:  Network api_default  Removed
api pretest:  Network api_default  Creating
api pretest:  Network api_default  Created
api pretest:  Volume "api_postgres_data"  Creating
api pretest:  Volume "api_postgres_data"  Created
api pretest:  Container postgres  Creating
api pretest:  Container postgres  Created
api pretest:  Container postgres  Starting
api pretest:  Container postgres  Started
ui test: PASS src/components/tests/App.test.tsx
ui test:   âœ“ renders learn react link (138 ms)
ui test: Test Suites: 1 passed, 1 total
ui test: Tests:       1 passed, 1 total
ui test: Snapshots:   0 total
ui test: Time:        1.275 s
ui test: Ran all test suites.
ui test: Done
api pretest: Done
api test$ vitest run
api test: [1m[46m RUN [49m[22m [36mv4.0.10 [39m[90m/workspaces/rate-my-everything/api[39m
api test: [dotenv@17.2.3] injecting env (8) from .env.test -- tip: âš™ï¸  suppress all logs with { quiet: true }
api test: [dotenv@17.2.3] injecting env (8) from .env.test -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
api test: Data Source has been initialized!
api test: Attempting to create test user...
api test: Server is running on port 3001
api test: Test user created successfully
api test: Attempting to get auth token...
api test: Authentication token written to file: /workspaces/rate-my-everything/api/tmp/auth-token.txt
api test: Auth token obtained and written to file successfully
api test: [90mstdout[2m | tests/integration/category.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
api test: [90mstdout[2m | tests/integration/category.test.ts
api test: [22m[39mData Source has been initialized!
api test: [90mstdout[2m | tests/integration/category.test.ts
api test: [22m[39mServer is running on port 3001
api test: [90mstdout[2m | tests/integration/category.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: âš™ï¸  write to custom object with { processEnv: myObject }
api test: [90mstderr[2m | tests/integration/category.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mPUT /api/categories/:name[2m > [22m[2mshould fail when updating a category to a name that already exists
api test: [22m[39mQueryFailedError: duplicate key value violates unique constraint "UQ_23c05c292c439d77b0de816b500"
api test:     at PostgresQueryRunner.query (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/driver/postgres/PostgresQueryRunner.js:216:19)
api test: [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:     at UpdateQueryBuilder.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/UpdateQueryBuilder.js:83:33)
api test:     at updateSubject (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:380:38)
api test:     at async Promise.all (index 0)
api test:     at SubjectExecutor.executeUpdateOperations (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:416:9)
api test:     at SubjectExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:99:9)
api test:     at EntityPersistExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/EntityPersistExecutor.js:140:21)
api test:     at CategoryController.update [90m(/workspaces/rate-my-everything/api/[39msrc/api/CategoryController.ts:72:20[90m)[39m {
api test:   query: [32m'UPDATE "category" SET "name" = $1 WHERE "id" IN ($2)'[39m,
api test:   parameters: [ [32m'Another-Category-1763452582882'[39m, [33m4[39m ],
api test:   driverError: error: duplicate key value violates unique constraint "UQ_23c05c292c439d77b0de816b500"
api test:       at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/pg@8.16.3/node_modules/[4mpg[24m/lib/client.js:545:17
api test:   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:       at PostgresQueryRunner.query (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/driver/postgres/PostgresQueryRunner.js:181:25)
api test:       at UpdateQueryBuilder.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/UpdateQueryBuilder.js:83:33)
api test:       at updateSubject (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:380:38)
api test:       at async Promise.all (index 0)
api test:       at SubjectExecutor.executeUpdateOperations (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:416:9)
api test:       at SubjectExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:99:9)
api test:       at EntityPersistExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/EntityPersistExecutor.js:140:21)
api test:       at CategoryController.update [90m(/workspaces/rate-my-everything/api/[39msrc/api/CategoryController.ts:72:20[90m)[39m {
api test:     length: [33m254[39m,
api test:     severity: [32m'ERROR'[39m,
api test:     code: [32m'23505'[39m,
api test:     detail: [32m'Key (name)=(Another-Category-1763452582882) already exists.'[39m,
api test:     hint: [90mundefined[39m,
api test:     position: [90mundefined[39m,
api test:     internalPosition: [90mundefined[39m,
api test:     internalQuery: [90mundefined[39m,
api test:     where: [90mundefined[39m,
api test:     schema: [32m'public'[39m,
api test:     table: [32m'category'[39m,
api test:     column: [90mundefined[39m,
api test:     dataType: [90mundefined[39m,
api test:     constraint: [32m'UQ_23c05c292c439d77b0de816b500'[39m,
api test:     file: [32m'nbtinsert.c'[39m,
api test:     line: [32m'666'[39m,
api test:     routine: [32m'_bt_check_unique'[39m
api test:   },
api test:   length: [33m254[39m,
api test:   severity: [32m'ERROR'[39m,
api test:   code: [32m'23505'[39m,
api test:   detail: [32m'Key (name)=(Another-Category-1763452582882) already exists.'[39m,
api test:   hint: [90mundefined[39m,
api test:   position: [90mundefined[39m,
api test:   internalPosition: [90mundefined[39m,
api test:   internalQuery: [90mundefined[39m,
api test:   where: [90mundefined[39m,
api test:   schema: [32m'public'[39m,
api test:   table: [32m'category'[39m,
api test:   column: [90mundefined[39m,
api test:   dataType: [90mundefined[39m,
api test:   constraint: [32m'UQ_23c05c292c439d77b0de816b500'[39m,
api test:   file: [32m'nbtinsert.c'[39m,
api test:   line: [32m'666'[39m,
api test:   routine: [32m'_bt_check_unique'[39m
api test: }
api test: [90mstdout[2m | tests/integration/category.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":1,"name":"AttrCat-1763452582736","description":"For attribute tests"}
api test: [90mstdout[2m | tests/integration/category.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":2,"name":"ItemCat-1763452582799","description":"For item tests"}
api test: [90mstdout[2m | tests/integration/category.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":3,"name":"RatedCat-1763452582842","description":"For rated item tests"}
api test: [90mstdout[2m | tests/integration/category.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":4,"name":"Test-Category-1763452582863","description":"Created during integration tests"}
api test: [90mstdout[2m | tests/integration/category.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":5,"name":"Another-Category-1763452582882","description":"Another category for name conflict test"}
api test:  [31mâ¯[39m tests/integration/category.test.ts [2m([22m[2m44 tests[22m[2m | [22m[31m17 failed[39m[2m | [22m[33m9 skipped[39m[2m)[22m[32m 246[2mms[22m[39m
api test: [31m       [31mÃ—[31m should create a new attribute[39m[32m 11[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create an attribute with missing name[32m 4[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get all attributes[39m[32m 5[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get attribute by id[39m[32m 0[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a non-existent attribute[32m 5[2mms[22m[39m
api test: [31m       [31mÃ—[31m should update an attribute[39m[32m 0[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail to update a non-existent attribute[39m[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should delete an attribute[39m[32m 0[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a non-existent attribute[32m 6[2mms[22m[39m
api test: [31m       [31mÃ—[31m should create a new item[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create an item with missing name[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get all items[39m[32m 9[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get item by id[39m[32m 0[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a non-existent item[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should update an item[39m[32m 0[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail to update a non-existent item[39m[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should delete an item[39m[32m 0[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a non-existent item[32m 4[2mms[22m[39m
api test:        [2m[90mâ†“[39m[22m should create a new rated item
api test:        [2m[90mâ†“[39m[22m should fail to create a rated item with missing itemId
api test:        [2m[90mâ†“[39m[22m should update a rated item
api test:        [2m[90mâ†“[39m[22m should fail to update a non-existent rated item
api test:        [2m[90mâ†“[39m[22m should get all rated items
api test:        [2m[90mâ†“[39m[22m should get rated item by id
api test:        [2m[90mâ†“[39m[22m should fail to get a non-existent rated item
api test:        [2m[90mâ†“[39m[22m should delete a rated item
api test:        [2m[90mâ†“[39m[22m should fail to delete a non-existent rated item
api test:        [32mâœ“[39m should create a new category when authorized[32m 5[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create a category with missing name[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create a category when unauthorized[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should update a category[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to update a category with missing name[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail to update a non-existent category[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to update a category when unauthorized[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail when updating a category to a name that already exists[39m[32m 14[2mms[22m[39m
api test: [31m       [31mÃ—[31m should return all categories[39m[32m 7[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get categories when unauthorized[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should return an empty array when no categories exist[32m 27[2mms[22m[39m
api test: [31m       [31mÃ—[31m should return a specific category by name[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a non-existent category[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a category when unauthorized[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should delete a category[32m 6[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a non-existent category[32m 6[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a category when unauthorized[32m 3[2mms[22m[39m
api test: [90mstdout[2m | tests/integration/item.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: âš™ï¸  override existing env vars with { override: true }
api test: [90mstdout[2m | tests/integration/item.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: ðŸ“¡ add observability to secrets: https://dotenvx.com/ops
api test: [90mstdout[2m | tests/integration/item.test.ts
api test: [22m[39mData Source has been initialized!
api test: [90mstdout[2m | tests/integration/item.test.ts
api test: [22m[39mServer is running on port 3001
api test: [90mstderr[2m | tests/integration/item.test.ts[2m > [22m[2mAttribute API Integration Tests
api test: [22m[39mTypeError: Cannot read properties of undefined (reading 'tableName')
api test:     at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/relation-id/RelationIdLoader.js:172:26
api test:     at Array.map (<anonymous>)
api test:     at RelationIdLoader.load (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/relation-id/RelationIdLoader.js:20:52)
api test:     at SelectQueryBuilder.executeEntitiesAndRawResults (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/SelectQueryBuilder.js:2083:65)
api test: [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:     at SelectQueryBuilder.getRawAndEntities (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/SelectQueryBuilder.js:684:29)
api test:     at SelectQueryBuilder.getMany (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/SelectQueryBuilder.js:750:25)
api test:     at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectDatabaseEntityLoader.js:88:28
api test:     at async Promise.all (index 0)
api test:     at SubjectDatabaseEntityLoader.load (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectDatabaseEntityLoader.js:113:9)
api test: [90mstderr[2m | tests/integration/item.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mPUT /api/categories/:name[2m > [22m[2mshould fail when updating a category to a name that already exists
api test: [22m[39mQueryFailedError: duplicate key value violates unique constraint "UQ_23c05c292c439d77b0de816b500"
api test:     at PostgresQueryRunner.query (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/driver/postgres/PostgresQueryRunner.js:216:19)
api test: [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:     at UpdateQueryBuilder.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/UpdateQueryBuilder.js:83:33)
api test:     at updateSubject (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:380:38)
api test:     at async Promise.all (index 0)
api test:     at SubjectExecutor.executeUpdateOperations (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:416:9)
api test:     at SubjectExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:99:9)
api test:     at EntityPersistExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/EntityPersistExecutor.js:140:21)
api test:     at CategoryController.update [90m(/workspaces/rate-my-everything/api/[39msrc/api/CategoryController.ts:72:20[90m)[39m {
api test:   query: [32m'UPDATE "category" SET "name" = $1 WHERE "id" IN ($2)'[39m,
api test:   parameters: [ [32m'Another-Category-1763452583822'[39m, [33m7[39m ],
api test:   driverError: error: duplicate key value violates unique constraint "UQ_23c05c292c439d77b0de816b500"
api test:       at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/pg@8.16.3/node_modules/[4mpg[24m/lib/client.js:545:17
api test:   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:       at PostgresQueryRunner.query (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/driver/postgres/PostgresQueryRunner.js:181:25)
api test:       at UpdateQueryBuilder.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/UpdateQueryBuilder.js:83:33)
api test:       at updateSubject (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:380:38)
api test:       at async Promise.all (index 0)
api test:       at SubjectExecutor.executeUpdateOperations (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:416:9)
api test:       at SubjectExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:99:9)
api test:       at EntityPersistExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/EntityPersistExecutor.js:140:21)
api test:       at CategoryController.update [90m(/workspaces/rate-my-everything/api/[39msrc/api/CategoryController.ts:72:20[90m)[39m {
api test:     length: [33m254[39m,
api test:     severity: [32m'ERROR'[39m,
api test:     code: [32m'23505'[39m,
api test:     detail: [32m'Key (name)=(Another-Category-1763452583822) already exists.'[39m,
api test:     hint: [90mundefined[39m,
api test:     position: [90mundefined[39m,
api test:     internalPosition: [90mundefined[39m,
api test:     internalQuery: [90mundefined[39m,
api test:     where: [90mundefined[39m,
api test:     schema: [32m'public'[39m,
api test:     table: [32m'category'[39m,
api test:     column: [90mundefined[39m,
api test:     dataType: [90mundefined[39m,
api test:     constraint: [32m'UQ_23c05c292c439d77b0de816b500'[39m,
api test:     file: [32m'nbtinsert.c'[39m,
api test:     line: [32m'666'[39m,
api test:     routine: [32m'_bt_check_unique'[39m
api test:   },
api test:   length: [33m254[39m,
api test:   severity: [32m'ERROR'[39m,
api test:   code: [32m'23505'[39m,
api test:   detail: [32m'Key (name)=(Another-Category-1763452583822) already exists.'[39m,
api test:   hint: [90mundefined[39m,
api test:   position: [90mundefined[39m,
api test:   internalPosition: [90mundefined[39m,
api test:   internalQuery: [90mundefined[39m,
api test:   where: [90mundefined[39m,
api test:   schema: [32m'public'[39m,
api test:   table: [32m'category'[39m,
api test:   column: [90mundefined[39m,
api test:   dataType: [90mundefined[39m,
api test:   constraint: [32m'UQ_23c05c292c439d77b0de816b500'[39m,
api test:   file: [32m'nbtinsert.c'[39m,
api test:   line: [32m'666'[39m,
api test:   routine: [32m'_bt_check_unique'[39m
api test: }
api test: [90mstdout[2m | tests/integration/item.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":6,"name":"RatedCat-1763452583771","description":"For rated item tests"}
api test: [90mstdout[2m | tests/integration/item.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":7,"name":"Test-Category-1763452583799","description":"Created during integration tests"}
api test: [90mstdout[2m | tests/integration/item.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":8,"name":"Another-Category-1763452583822","description":"Another category for name conflict test"}
api test:  [31mâ¯[39m tests/integration/item.test.ts [2m([22m[2m44 tests[22m[2m | [22m[31m11 failed[39m[2m | [22m[33m18 skipped[39m[2m)[22m[32m 200[2mms[22m[39m
api test:        [2m[90mâ†“[39m[22m should create a new attribute
api test:        [2m[90mâ†“[39m[22m should fail to create an attribute with missing name
api test:        [2m[90mâ†“[39m[22m should get all attributes
api test:        [2m[90mâ†“[39m[22m should get attribute by id
api test:        [2m[90mâ†“[39m[22m should fail to get a non-existent attribute
api test:        [2m[90mâ†“[39m[22m should update an attribute
api test:        [2m[90mâ†“[39m[22m should fail to update a non-existent attribute
api test:        [2m[90mâ†“[39m[22m should delete an attribute
api test:        [2m[90mâ†“[39m[22m should fail to delete a non-existent attribute
api test:        [2m[90mâ†“[39m[22m should create a new rated item
api test:        [2m[90mâ†“[39m[22m should fail to create a rated item with missing itemId
api test:        [2m[90mâ†“[39m[22m should update a rated item
api test:        [2m[90mâ†“[39m[22m should fail to update a non-existent rated item
api test:        [2m[90mâ†“[39m[22m should get all rated items
api test:        [2m[90mâ†“[39m[22m should get rated item by id
api test:        [2m[90mâ†“[39m[22m should fail to get a non-existent rated item
api test:        [2m[90mâ†“[39m[22m should delete a rated item
api test:        [2m[90mâ†“[39m[22m should fail to delete a non-existent rated item
api test:        [32mâœ“[39m should create a new category when authorized[32m 8[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create a category with missing name[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create a category when unauthorized[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should update a category[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to update a category with missing name[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail to update a non-existent category[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to update a category when unauthorized[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail when updating a category to a name that already exists[39m[32m 14[2mms[22m[39m
api test: [31m       [31mÃ—[31m should return all categories[39m[32m 13[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get categories when unauthorized[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should return an empty array when no categories exist[32m 19[2mms[22m[39m
api test: [31m       [31mÃ—[31m should return a specific category by name[39m[32m 4[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a non-existent category[32m 7[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a category when unauthorized[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should delete a category[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a non-existent category[32m 4[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a category when unauthorized[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should create a new item[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create an item with missing name[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get all items[39m[32m 4[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get item by id[39m[32m 0[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a non-existent item[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should update an item[39m[32m 0[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail to update a non-existent item[39m[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should delete an item[39m[32m 0[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a non-existent item[32m 3[2mms[22m[39m
api test: [90mstdout[2m | tests/integration/attribute.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: ðŸ” encrypt with Dotenvx: https://dotenvx.com
api test: [90mstdout[2m | tests/integration/attribute.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
api test: [90mstdout[2m | tests/integration/attribute.test.ts
api test: [22m[39mData Source has been initialized!
api test: [90mstdout[2m | tests/integration/attribute.test.ts
api test: [22m[39mServer is running on port 3001
api test: [90mstderr[2m | tests/integration/attribute.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mPUT /api/categories/:name[2m > [22m[2mshould fail when updating a category to a name that already exists
api test: [22m[39mQueryFailedError: duplicate key value violates unique constraint "UQ_23c05c292c439d77b0de816b500"
api test:     at PostgresQueryRunner.query (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/driver/postgres/PostgresQueryRunner.js:216:19)
api test: [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:     at UpdateQueryBuilder.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/UpdateQueryBuilder.js:83:33)
api test:     at updateSubject (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:380:38)
api test:     at async Promise.all (index 0)
api test:     at SubjectExecutor.executeUpdateOperations (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:416:9)
api test:     at SubjectExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:99:9)
api test:     at EntityPersistExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/EntityPersistExecutor.js:140:21)
api test:     at CategoryController.update [90m(/workspaces/rate-my-everything/api/[39msrc/api/CategoryController.ts:72:20[90m)[39m {
api test:   query: [32m'UPDATE "category" SET "name" = $1 WHERE "id" IN ($2)'[39m,
api test:   parameters: [ [32m'Another-Category-1763452584803'[39m, [33m12[39m ],
api test:   driverError: error: duplicate key value violates unique constraint "UQ_23c05c292c439d77b0de816b500"
api test:       at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/pg@8.16.3/node_modules/[4mpg[24m/lib/client.js:545:17
api test:   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:       at PostgresQueryRunner.query (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/driver/postgres/PostgresQueryRunner.js:181:25)
api test:       at UpdateQueryBuilder.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/UpdateQueryBuilder.js:83:33)
api test:       at updateSubject (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:380:38)
api test:       at async Promise.all (index 0)
api test:       at SubjectExecutor.executeUpdateOperations (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:416:9)
api test:       at SubjectExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:99:9)
api test:       at EntityPersistExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/EntityPersistExecutor.js:140:21)
api test:       at CategoryController.update [90m(/workspaces/rate-my-everything/api/[39msrc/api/CategoryController.ts:72:20[90m)[39m {
api test:     length: [33m254[39m,
api test:     severity: [32m'ERROR'[39m,
api test:     code: [32m'23505'[39m,
api test:     detail: [32m'Key (name)=(Another-Category-1763452584803) already exists.'[39m,
api test:     hint: [90mundefined[39m,
api test:     position: [90mundefined[39m,
api test:     internalPosition: [90mundefined[39m,
api test:     internalQuery: [90mundefined[39m,
api test:     where: [90mundefined[39m,
api test:     schema: [32m'public'[39m,
api test:     table: [32m'category'[39m,
api test:     column: [90mundefined[39m,
api test:     dataType: [90mundefined[39m,
api test:     constraint: [32m'UQ_23c05c292c439d77b0de816b500'[39m,
api test:     file: [32m'nbtinsert.c'[39m,
api test:     line: [32m'666'[39m,
api test:     routine: [32m'_bt_check_unique'[39m
api test:   },
api test:   length: [33m254[39m,
api test:   severity: [32m'ERROR'[39m,
api test:   code: [32m'23505'[39m,
api test:   detail: [32m'Key (name)=(Another-Category-1763452584803) already exists.'[39m,
api test:   hint: [90mundefined[39m,
api test:   position: [90mundefined[39m,
api test:   internalPosition: [90mundefined[39m,
api test:   internalQuery: [90mundefined[39m,
api test:   where: [90mundefined[39m,
api test:   schema: [32m'public'[39m,
api test:   table: [32m'category'[39m,
api test:   column: [90mundefined[39m,
api test:   dataType: [90mundefined[39m,
api test:   constraint: [32m'UQ_23c05c292c439d77b0de816b500'[39m,
api test:   file: [32m'nbtinsert.c'[39m,
api test:   line: [32m'666'[39m,
api test:   routine: [32m'_bt_check_unique'[39m
api test: }
api test: [90mstdout[2m | tests/integration/attribute.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":9,"name":"ItemCat-1763452583897","description":"For item tests"}
api test: [90mstdout[2m | tests/integration/attribute.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":10,"name":"ItemCat-1763452584699","description":"For item tests"}
api test: [90mstdout[2m | tests/integration/attribute.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":11,"name":"RatedCat-1763452584766","description":"For rated item tests"}
api test: [90mstdout[2m | tests/integration/attribute.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":12,"name":"Test-Category-1763452584784","description":"Created during integration tests"}
api test: [90mstdout[2m | tests/integration/attribute.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":13,"name":"Another-Category-1763452584803","description":"Another category for name conflict test"}
api test: [90mstderr[2m | tests/integration/attribute.test.ts[2m > [22m[2mAttribute API Integration Tests
api test: [22m[39mTypeError: Cannot read properties of undefined (reading 'tableName')
api test:     at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/relation-id/RelationIdLoader.js:172:26
api test:     at Array.map (<anonymous>)
api test:     at RelationIdLoader.load (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/relation-id/RelationIdLoader.js:20:52)
api test:     at SelectQueryBuilder.executeEntitiesAndRawResults (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/SelectQueryBuilder.js:2083:65)
api test: [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:     at SelectQueryBuilder.getRawAndEntities (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/SelectQueryBuilder.js:684:29)
api test:     at SelectQueryBuilder.getMany (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/SelectQueryBuilder.js:750:25)
api test:     at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectDatabaseEntityLoader.js:88:28
api test:     at async Promise.all (index 0)
api test:     at SubjectDatabaseEntityLoader.load (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectDatabaseEntityLoader.js:113:9)
api test:  [31mâ¯[39m tests/integration/attribute.test.ts [2m([22m[2m44 tests[22m[2m | [22m[31m11 failed[39m[2m | [22m[33m18 skipped[39m[2m)[22m[32m 214[2mms[22m[39m
api test: [31m       [31mÃ—[31m should create a new item[39m[32m 6[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create an item with missing name[32m 4[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get all items[39m[32m 8[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get item by id[39m[32m 1[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a non-existent item[32m 4[2mms[22m[39m
api test: [31m       [31mÃ—[31m should update an item[39m[32m 0[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail to update a non-existent item[39m[32m 8[2mms[22m[39m
api test: [31m       [31mÃ—[31m should delete an item[39m[32m 0[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a non-existent item[32m 4[2mms[22m[39m
api test:        [2m[90mâ†“[39m[22m should create a new rated item
api test:        [2m[90mâ†“[39m[22m should fail to create a rated item with missing itemId
api test:        [2m[90mâ†“[39m[22m should update a rated item
api test:        [2m[90mâ†“[39m[22m should fail to update a non-existent rated item
api test:        [2m[90mâ†“[39m[22m should get all rated items
api test:        [2m[90mâ†“[39m[22m should get rated item by id
api test:        [2m[90mâ†“[39m[22m should fail to get a non-existent rated item
api test:        [2m[90mâ†“[39m[22m should delete a rated item
api test:        [2m[90mâ†“[39m[22m should fail to delete a non-existent rated item
api test:        [32mâœ“[39m should create a new category when authorized[32m 5[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create a category with missing name[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create a category when unauthorized[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should update a category[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to update a category with missing name[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail to update a non-existent category[39m[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should fail to update a category when unauthorized[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail when updating a category to a name that already exists[39m[32m 14[2mms[22m[39m
api test: [31m       [31mÃ—[31m should return all categories[39m[32m 5[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get categories when unauthorized[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should return an empty array when no categories exist[32m 30[2mms[22m[39m
api test: [31m       [31mÃ—[31m should return a specific category by name[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a non-existent category[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a category when unauthorized[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should delete a category[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a non-existent category[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a category when unauthorized[32m 2[2mms[22m[39m
api test:        [2m[90mâ†“[39m[22m should create a new attribute
api test:        [2m[90mâ†“[39m[22m should fail to create an attribute with missing name
api test:        [2m[90mâ†“[39m[22m should get all attributes
api test:        [2m[90mâ†“[39m[22m should get attribute by id
api test:        [2m[90mâ†“[39m[22m should fail to get a non-existent attribute
api test:        [2m[90mâ†“[39m[22m should update an attribute
api test:        [2m[90mâ†“[39m[22m should fail to update a non-existent attribute
api test:        [2m[90mâ†“[39m[22m should delete an attribute
api test:        [2m[90mâ†“[39m[22m should fail to delete a non-existent attribute
api test: [90mstdout[2m | tests/integration/ratings.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: âš™ï¸  override existing env vars with { override: true }
api test: [90mstdout[2m | tests/integration/ratings.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: âš™ï¸  suppress all logs with { quiet: true }
api test: [90mstdout[2m | tests/integration/ratings.test.ts
api test: [22m[39mData Source has been initialized!
api test: [90mstdout[2m | tests/integration/ratings.test.ts
api test: [22m[39mServer is running on port 3001
api test: [90mstderr[2m | tests/integration/ratings.test.ts[2m > [22m[2mAttribute API Integration Tests
api test: [22m[39mTypeError: Cannot read properties of undefined (reading 'tableName')
api test:     at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/relation-id/RelationIdLoader.js:172:26
api test:     at Array.map (<anonymous>)
api test:     at RelationIdLoader.load (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/relation-id/RelationIdLoader.js:20:52)
api test:     at SelectQueryBuilder.executeEntitiesAndRawResults (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/SelectQueryBuilder.js:2083:65)
api test: [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:     at SelectQueryBuilder.getRawAndEntities (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/SelectQueryBuilder.js:684:29)
api test:     at SelectQueryBuilder.getMany (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/SelectQueryBuilder.js:750:25)
api test:     at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectDatabaseEntityLoader.js:88:28
api test:     at async Promise.all (index 0)
api test:     at SubjectDatabaseEntityLoader.load (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectDatabaseEntityLoader.js:113:9)
api test: [90mstderr[2m | tests/integration/ratings.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mPUT /api/categories/:name[2m > [22m[2mshould fail when updating a category to a name that already exists
api test: [22m[39mQueryFailedError: duplicate key value violates unique constraint "UQ_23c05c292c439d77b0de816b500"
api test:     at PostgresQueryRunner.query (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/driver/postgres/PostgresQueryRunner.js:216:19)
api test: [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:     at UpdateQueryBuilder.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/UpdateQueryBuilder.js:83:33)
api test:     at updateSubject (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:380:38)
api test:     at async Promise.all (index 0)
api test:     at SubjectExecutor.executeUpdateOperations (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:416:9)
api test:     at SubjectExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:99:9)
api test:     at EntityPersistExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/EntityPersistExecutor.js:140:21)
api test:     at CategoryController.update [90m(/workspaces/rate-my-everything/api/[39msrc/api/CategoryController.ts:72:20[90m)[39m {
api test:   query: [32m'UPDATE "category" SET "name" = $1 WHERE "id" IN ($2)'[39m,
api test:   parameters: [ [32m'Another-Category-1763452585737'[39m, [33m15[39m ],
api test:   driverError: error: duplicate key value violates unique constraint "UQ_23c05c292c439d77b0de816b500"
api test:       at /workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/pg@8.16.3/node_modules/[4mpg[24m/lib/client.js:545:17
api test:   [90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
api test:       at PostgresQueryRunner.query (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/driver/postgres/PostgresQueryRunner.js:181:25)
api test:       at UpdateQueryBuilder.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/query-builder/UpdateQueryBuilder.js:83:33)
api test:       at updateSubject (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:380:38)
api test:       at async Promise.all (index 0)
api test:       at SubjectExecutor.executeUpdateOperations (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:416:9)
api test:       at SubjectExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/SubjectExecutor.js:99:9)
api test:       at EntityPersistExecutor.execute (/workspaces/rate-my-everything/node_modules/[4m.pnpm[24m/typeorm@0.3.27_pg@8.16.3_reflect-metadata@0.2.2/node_modules/[4mtypeorm[24m/persistence/EntityPersistExecutor.js:140:21)
api test:       at CategoryController.update [90m(/workspaces/rate-my-everything/api/[39msrc/api/CategoryController.ts:72:20[90m)[39m {
api test:     length: [33m254[39m,
api test:     severity: [32m'ERROR'[39m,
api test:     code: [32m'23505'[39m,
api test:     detail: [32m'Key (name)=(Another-Category-1763452585737) already exists.'[39m,
api test:     hint: [90mundefined[39m,
api test:     position: [90mundefined[39m,
api test:     internalPosition: [90mundefined[39m,
api test:     internalQuery: [90mundefined[39m,
api test:     where: [90mundefined[39m,
api test:     schema: [32m'public'[39m,
api test:     table: [32m'category'[39m,
api test:     column: [90mundefined[39m,
api test:     dataType: [90mundefined[39m,
api test:     constraint: [32m'UQ_23c05c292c439d77b0de816b500'[39m,
api test:     file: [32m'nbtinsert.c'[39m,
api test:     line: [32m'666'[39m,
api test:     routine: [32m'_bt_check_unique'[39m
api test:   },
api test:   length: [33m254[39m,
api test:   severity: [32m'ERROR'[39m,
api test:   code: [32m'23505'[39m,
api test:   detail: [32m'Key (name)=(Another-Category-1763452585737) already exists.'[39m,
api test:   hint: [90mundefined[39m,
api test:   position: [90mundefined[39m,
api test:   internalPosition: [90mundefined[39m,
api test:   internalQuery: [90mundefined[39m,
api test:   where: [90mundefined[39m,
api test:   schema: [32m'public'[39m,
api test:   table: [32m'category'[39m,
api test:   column: [90mundefined[39m,
api test:   dataType: [90mundefined[39m,
api test:   constraint: [32m'UQ_23c05c292c439d77b0de816b500'[39m,
api test:   file: [32m'nbtinsert.c'[39m,
api test:   line: [32m'666'[39m,
api test:   routine: [32m'_bt_check_unique'[39m
api test: }
api test: [90mstdout[2m | tests/integration/ratings.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":14,"name":"ItemCat-1763452585653","description":"For item tests"}
api test: [90mstdout[2m | tests/integration/ratings.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":15,"name":"Test-Category-1763452585715","description":"Created during integration tests"}
api test: [90mstdout[2m | tests/integration/ratings.test.ts[2m > [22m[2mCategory API Integration Tests[2m > [22m[2mGET /api/categories[2m > [22m[2mshould return an empty array when no categories exist
api test: [22m[39mDeleting category: {"id":16,"name":"Another-Category-1763452585737","description":"Another category for name conflict test"}
api test:  [31mâ¯[39m tests/integration/ratings.test.ts [2m([22m[2m44 tests[22m[2m | [22m[31m11 failed[39m[2m | [22m[33m18 skipped[39m[2m)[22m[32m 209[2mms[22m[39m
api test:        [2m[90mâ†“[39m[22m should create a new attribute
api test:        [2m[90mâ†“[39m[22m should fail to create an attribute with missing name
api test:        [2m[90mâ†“[39m[22m should get all attributes
api test:        [2m[90mâ†“[39m[22m should get attribute by id
api test:        [2m[90mâ†“[39m[22m should fail to get a non-existent attribute
api test:        [2m[90mâ†“[39m[22m should update an attribute
api test:        [2m[90mâ†“[39m[22m should fail to update a non-existent attribute
api test:        [2m[90mâ†“[39m[22m should delete an attribute
api test:        [2m[90mâ†“[39m[22m should fail to delete a non-existent attribute
api test: [31m       [31mÃ—[31m should create a new item[39m[32m 4[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create an item with missing name[32m 4[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get all items[39m[32m 10[2mms[22m[39m
api test: [31m       [31mÃ—[31m should get item by id[39m[32m 1[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a non-existent item[32m 6[2mms[22m[39m
api test: [31m       [31mÃ—[31m should update an item[39m[32m 0[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail to update a non-existent item[39m[32m 4[2mms[22m[39m
api test: [31m       [31mÃ—[31m should delete an item[39m[32m 0[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a non-existent item[32m 5[2mms[22m[39m
api test:        [32mâœ“[39m should create a new category when authorized[32m 6[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create a category with missing name[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to create a category when unauthorized[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should update a category[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to update a category with missing name[32m 3[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail to update a non-existent category[39m[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to update a category when unauthorized[32m 2[2mms[22m[39m
api test: [31m       [31mÃ—[31m should fail when updating a category to a name that already exists[39m[32m 18[2mms[22m[39m
api test: [31m       [31mÃ—[31m should return all categories[39m[32m 13[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get categories when unauthorized[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should return an empty array when no categories exist[32m 18[2mms[22m[39m
api test: [31m       [31mÃ—[31m should return a specific category by name[39m[32m 4[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a non-existent category[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to get a category when unauthorized[32m 2[2mms[22m[39m
api test:        [32mâœ“[39m should delete a category[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a non-existent category[32m 3[2mms[22m[39m
api test:        [32mâœ“[39m should fail to delete a category when unauthorized[32m 2[2mms[22m[39m
api test:        [2m[90mâ†“[39m[22m should create a new rated item
api test:        [2m[90mâ†“[39m[22m should fail to create a rated item with missing itemId
api test:        [2m[90mâ†“[39m[22m should update a rated item
api test:        [2m[90mâ†“[39m[22m should fail to update a non-existent rated item
api test:        [2m[90mâ†“[39m[22m should get all rated items
api test:        [2m[90mâ†“[39m[22m should get rated item by id
api test:        [2m[90mâ†“[39m[22m should fail to get a non-existent rated item
api test:        [2m[90mâ†“[39m[22m should delete a rated item
api test:        [2m[90mâ†“[39m[22m should fail to delete a non-existent rated item
api test: [90mstdout[2m | tests/integration/login.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: ðŸ› ï¸  run anywhere with `dotenvx run -- yourcommand`
api test: [90mstdout[2m | tests/integration/login.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: ðŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
api test: [90mstdout[2m | tests/integration/login.test.ts
api test: [22m[39mData Source has been initialized!
api test: [90mstdout[2m | tests/integration/login.test.ts
api test: [22m[39mServer is running on port 3001
api test:  [32mâœ“[39m tests/integration/login.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 165[2mms[22m[39m
api test: [90mstdout[2m | tests/integration/apierror.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild
api test: [90mstdout[2m | tests/integration/apierror.test.ts
api test: [22m[39mData Source has been initialized!
api test: [90mstdout[2m | tests/integration/apierror.test.ts
api test: [22m[39mServer is running on port 3001
api test:  [32mâœ“[39m tests/integration/apierror.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 28[2mms[22m[39m
api test: [90mstdout[2m | tests/integration/health.test.ts
api test: [22m[39m[dotenv@17.2.3] injecting env (8) from .env.test -- tip: ðŸ” prevent building .env in docker: https://dotenvx.com/prebuild
api test: [90mstdout[2m | tests/integration/health.test.ts
api test: [22m[39mData Source has been initialized!
api test: [90mstdout[2m | tests/integration/health.test.ts
api test: [22m[39mServer is running on port 3001
api test:  [32mâœ“[39m tests/integration/health.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 20[2mms[22m[39m
api test: [31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Suites 7 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mRatedItem API Integration Tests
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mRatedItem API Integration Tests
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mRatedItem API Integration Tests
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mRatedItem API Integration Tests
api test: [31m[1mError[22m: expected 201 "Created", got 400 "Bad Request"[39m
api test: [36m [2mâ¯[22m tests/integration/ratings.test.ts:[2m40:8[22m[39m
api test:     [90m 38| [39m      [33m.[39m[35mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer [39m[36m${[39mtestAuthToken[36m}[39m[32m`[39m)
api test:     [90m 39| [39m      .send({ name: `RatedItem-${Date.now()}`, description: 'For ratedâ€¦
api test:     [90m 40| [39m      [33m.[39m[34mexpect[39m([34m201[39m)
api test:     [90m   | [39m       [31m^[39m
api test:     [90m 41| [39m    testItem [33m=[39m itemRes[33m.[39mbody
api test:     [90m 42| [39m  })
api test: [90m [2mâ¯[22m Test._assertStatus ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m309:14[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mAttribute API Integration Tests
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mAttribute API Integration Tests
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mAttribute API Integration Tests
api test: [31m[1mError[22m: expected 204 "No Content", got 500 "Internal Server Error"[39m
api test: [36m [2mâ¯[22m cleanupAllAttributes tests/common/DataCleanup.ts:[2m25:8[22m[39m
api test:     [90m 23| [39m      [33m.[39m[35mdelete[39m([32m`[39m[36m${[39m[33mATTRIBUTES_BASE_PATH[39m[36m}[39m[32m/[39m[36m${[39mattr[33m.[39mid[36m}[39m[32m`[39m)
api test:     [90m 24| [39m      [33m.[39m[35mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer [39m[36m${[39mtestAuthToken[36m}[39m[32m`[39m)
api test:     [90m 25| [39m      [33m.[39m[34mexpect[39m([34m204[39m)
api test:     [90m   | [39m       [31m^[39m
api test:     [90m 26| [39m  }
api test:     [90m 27| [39m}
api test: [90m [2mâ¯[22m tests/integration/attribute.test.ts:[2m22:5[22m[39m
api test: [90m [2mâ¯[22m Test._assertStatus ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m309:14[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/57]âŽ¯[22m[39m
api test: [31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 50 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mItem API Integration Tests[2m > [22mPOST /api/items[2m > [22mshould create a new item
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mItem API Integration Tests[2m > [22mPOST /api/items[2m > [22mshould create a new item
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mItem API Integration Tests[2m > [22mPOST /api/items[2m > [22mshould create a new item
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mItem API Integration Tests[2m > [22mPOST /api/items[2m > [22mshould create a new item
api test: [31m[1mError[22m: expected 201 "Created", got 400 "Bad Request"[39m
api test: [36m [2mâ¯[22m tests/integration/item.test.ts:[2m44:10[22m[39m
api test:     [90m 42| [39m        [33m.[39m[34msend[39m(newItem)
api test:     [90m 43| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m 44| [39m        [33m.[39m[34mexpect[39m([34m201[39m)
api test:     [90m   | [39m         [31m^[39m
api test:     [90m 45| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m 46| [39m          [35mconst[39m apiResult [33m=[39m res[33m.[39mbody [35mas[39m [33mItem[39m
api test: [90m [2mâ¯[22m Test._assertStatus ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m309:14[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mItem API Integration Tests[2m > [22mGET /api/items[2m > [22mshould get all items
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mItem API Integration Tests[2m > [22mGET /api/items[2m > [22mshould get all items
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mItem API Integration Tests[2m > [22mGET /api/items[2m > [22mshould get all items
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mItem API Integration Tests[2m > [22mGET /api/items[2m > [22mshould get all items
api test: [31m[1mAssertionError[22m: expected +0 to be 2 // Object.is equality[39m
api test: [32m- Expected[39m
api test: [31m+ Received[39m
api test: [32m- 2[39m
api test: [31m+ 0[39m
api test: [36m [2mâ¯[22m tests/integration/item.test.ts:[2m82:10[22m[39m
api test:     [90m 80| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m 81| [39m        [33m.[39m[34mexpect[39m([34m200[39m)
api test:     [90m 82| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m   | [39m         [31m^[39m
api test:     [90m 83| [39m          [35mconst[39m items [33m=[39m res[33m.[39mbody [35mas[39m [33mItem[39m[]
api test:     [90m 84| [39m          [35mconst[39m categoryNames [33m=[39m items[33m.[39m[34mmap[39m(item [33m=>[39m item[33m.[39mcategory[33m.[39mname)
api test: [90m [2mâ¯[22m tests/integration/item.test.ts:[2m86:32[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mItem API Integration Tests[2m > [22mGET /api/items/:id[2m > [22mshould get item by id
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mItem API Integration Tests[2m > [22mGET /api/items/:id[2m > [22mshould get item by id
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mItem API Integration Tests[2m > [22mGET /api/items/:id[2m > [22mshould get item by id
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mItem API Integration Tests[2m > [22mGET /api/items/:id[2m > [22mshould get item by id
api test: [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'id')[39m
api test: [36m [2mâ¯[22m tests/integration/item.test.ts:[2m110:45[22m[39m
api test:     [90m108| [39m    [34mit[39m([32m'should get item by id'[39m[33m,[39m [35masync[39m () [33m=>[39m {
api test:     [90m109| [39m      [35mawait[39m [34mrequest[39m(app)
api test:     [90m110| [39m        [33m.[39m[35mget[39m([32m`[39m[36m${[39m[33mITEMS_BASE_PATH[39m[36m}[39m[32m/[39m[36m${[39mtestItem[33m.[39mid[36m}[39m[32m`[39m)
api test:     [90m   | [39m                                            [31m^[39m
api test:     [90m111| [39m        [33m.[39m[35mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer [39m[36m${[39mtestAuthToken[36m}[39m[32m`[39m)
api test:     [90m112| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mItem API Integration Tests[2m > [22mPUT /api/items/:id[2m > [22mshould update an item
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mItem API Integration Tests[2m > [22mPUT /api/items/:id[2m > [22mshould update an item
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mItem API Integration Tests[2m > [22mPUT /api/items/:id[2m > [22mshould update an item
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mItem API Integration Tests[2m > [22mPUT /api/items/:id[2m > [22mshould update an item
api test: [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'id')[39m
api test: [36m [2mâ¯[22m tests/integration/item.test.ts:[2m147:45[22m[39m
api test:     [90m145| [39m      [35mconst[39m updatedDesc [33m=[39m [32m'Updated item description'[39m
api test:     [90m146| [39m      [35mawait[39m [34mrequest[39m(app)
api test:     [90m147| [39m        [33m.[39m[34mput[39m([32m`[39m[36m${[39m[33mITEMS_BASE_PATH[39m[36m}[39m[32m/[39m[36m${[39mtestItem[33m.[39mid[36m}[39m[32m`[39m)
api test:     [90m   | [39m                                            [31m^[39m
api test:     [90m148| [39m        [33m.[39m[35mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer [39m[36m${[39mtestAuthToken[36m}[39m[32m`[39m)
api test:     [90m149| [39m        [33m.[39m[34msend[39m({ description[33m:[39m updatedDesc })
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mItem API Integration Tests[2m > [22mPUT /api/items/:id[2m > [22mshould fail to update a non-existent item
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mItem API Integration Tests[2m > [22mPUT /api/items/:id[2m > [22mshould fail to update a non-existent item
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mItem API Integration Tests[2m > [22mPUT /api/items/:id[2m > [22mshould fail to update a non-existent item
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mItem API Integration Tests[2m > [22mPUT /api/items/:id[2m > [22mshould fail to update a non-existent item
api test: [31m[1mError[22m: expected 404 "Not Found", got 400 "Bad Request"[39m
api test: [36m [2mâ¯[22m tests/integration/item.test.ts:[2m170:10[22m[39m
api test:     [90m168| [39m        [33m.[39m[34msend[39m({ description[33m:[39m [32m'Should not work'[39m })
api test:     [90m169| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m170| [39m        [33m.[39m[34mexpect[39m([34m404[39m)
api test:     [90m   | [39m         [31m^[39m
api test:     [90m171| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m172| [39m          [35mconst[39m apiError [33m=[39m res[33m.[39mbody [35mas[39m [33mAPIError[39m
api test: [90m [2mâ¯[22m Test._assertStatus ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m309:14[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mItem API Integration Tests[2m > [22mDELETE /api/items/:id[2m > [22mshould delete an item
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mItem API Integration Tests[2m > [22mDELETE /api/items/:id[2m > [22mshould delete an item
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mItem API Integration Tests[2m > [22mDELETE /api/items/:id[2m > [22mshould delete an item
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mItem API Integration Tests[2m > [22mDELETE /api/items/:id[2m > [22mshould delete an item
api test: [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'id')[39m
api test: [36m [2mâ¯[22m tests/integration/item.test.ts:[2m183:48[22m[39m
api test:     [90m181| [39m    [34mit[39m([32m'should delete an item'[39m[33m,[39m [35masync[39m () [33m=>[39m {
api test:     [90m182| [39m      [35mawait[39m [34mrequest[39m(app)
api test:     [90m183| [39m        [33m.[39m[35mdelete[39m([32m`[39m[36m${[39m[33mITEMS_BASE_PATH[39m[36m}[39m[32m/[39m[36m${[39mtestItem[33m.[39mid[36m}[39m[32m`[39m)
api test:     [90m   | [39m                                               [31m^[39m
api test:     [90m184| [39m        [33m.[39m[35mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer [39m[36m${[39mtestAuthToken[36m}[39m[32m`[39m)
api test:     [90m185| [39m        [33m.[39m[34mexpect[39m([34m204[39m)
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould update a category
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould update a category
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould update a category
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould update a category
api test: [31m[1mError[22m: expected 200 "OK", got 400 "Bad Request"[39m
api test: [36m [2mâ¯[22m tests/integration/category.test.ts:[2m81:10[22m[39m
api test:     [90m 79| [39m        [33m.[39m[34msend[39m({ description[33m:[39m updatedDesc })
api test:     [90m 80| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m 81| [39m        [33m.[39m[34mexpect[39m([34m200[39m)
api test:     [90m   | [39m         [31m^[39m
api test:     [90m 82| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m 83| [39m          [35mconst[39m apiResult [33m=[39m res[33m.[39mbody [35mas[39m [33mCategory[39m
api test: [90m [2mâ¯[22m Test._assertStatus ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m309:14[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould fail to update a non-existent category
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould fail to update a non-existent category
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould fail to update a non-existent category
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould fail to update a non-existent category
api test: [31m[1mError[22m: expected 404 "Not Found", got 400 "Bad Request"[39m
api test: [36m [2mâ¯[22m tests/integration/category.test.ts:[2m111:10[22m[39m
api test:     [90m109| [39m        [33m.[39m[34msend[39m({ description[33m:[39m [32m'Should not work'[39m })
api test:     [90m110| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m111| [39m        [33m.[39m[34mexpect[39m([34m404[39m)
api test:     [90m   | [39m         [31m^[39m
api test:     [90m112| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m113| [39m          [35mconst[39m apiError [33m=[39m res[33m.[39mbody [35mas[39m [33mAPIError[39m
api test: [90m [2mâ¯[22m Test._assertStatus ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m309:14[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould fail when updating a category to a name that already exists
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould fail when updating a category to a name that already exists
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould fail when updating a category to a name that already exists
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mCategory API Integration Tests[2m > [22mPUT /api/categories/:name[2m > [22mshould fail when updating a category to a name that already exists
api test: [31m[1mError[22m: expected 422 "Unprocessable Entity", got 500 "Internal Server Error"[39m
api test: [36m [2mâ¯[22m tests/integration/category.test.ts:[2m154:10[22m[39m
api test:     [90m152| [39m        [33m.[39m[34msend[39m({ name[33m:[39m anotherCategory[33m.[39mname })
api test:     [90m153| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m154| [39m        [33m.[39m[34mexpect[39m([34m422[39m)
api test:     [90m   | [39m         [31m^[39m
api test:     [90m155| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m156| [39m          [35mconst[39m apiError [33m=[39m res[33m.[39mbody [35mas[39m [33mAPIError[39m
api test: [90m [2mâ¯[22m Test._assertStatus ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m309:14[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mCategory API Integration Tests[2m > [22mGET /api/categories[2m > [22mshould return all categories
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mCategory API Integration Tests[2m > [22mGET /api/categories[2m > [22mshould return all categories
api test: [31m[1mAssertionError[22m: expected 5 to be 3 // Object.is equality[39m
api test: [32m- Expected[39m
api test: [31m+ Received[39m
api test: [32m- 3[39m
api test: [31m+ 5[39m
api test: [36m [2mâ¯[22m tests/integration/category.test.ts:[2m171:10[22m[39m
api test:     [90m169| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m170| [39m        [33m.[39m[34mexpect[39m([34m200[39m)
api test:     [90m171| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m   | [39m         [31m^[39m
api test:     [90m172| [39m          [34mexpect[39m([33mArray[39m[33m.[39m[34misArray[39m(res[33m.[39mbody))[33m.[39m[34mtoBe[39m([35mtrue[39m)
api test:     [90m173| [39m          [34mexpect[39m(res[33m.[39mbody[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m3[39m)
api test: [90m [2mâ¯[22m tests/integration/category.test.ts:[2m173:35[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/attribute.test.ts[2m > [22mCategory API Integration Tests[2m > [22mGET /api/categories/:name[2m > [22mshould return a specific category by name
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mCategory API Integration Tests[2m > [22mGET /api/categories/:name[2m > [22mshould return a specific category by name
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mCategory API Integration Tests[2m > [22mGET /api/categories/:name[2m > [22mshould return a specific category by name
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mCategory API Integration Tests[2m > [22mGET /api/categories/:name[2m > [22mshould return a specific category by name
api test: [31m[1mError[22m: expected 200 "OK", got 404 "Not Found"[39m
api test: [36m [2mâ¯[22m tests/integration/category.test.ts:[2m231:10[22m[39m
api test:     [90m229| [39m        [33m.[39m[35mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer [39m[36m${[39mtestAuthToken[36m}[39m[32m`[39m)
api test:     [90m230| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m231| [39m        [33m.[39m[34mexpect[39m([34m200[39m)
api test:     [90m   | [39m         [31m^[39m
api test:     [90m232| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m233| [39m          [35mconst[39m apiResult [33m=[39m res[33m.[39mbody [35mas[39m [33mCategory[39m
api test: [90m [2mâ¯[22m Test._assertStatus ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m309:14[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mAttribute API Integration Tests[2m > [22mPOST /api/attributes[2m > [22mshould create a new attribute
api test: [31m[1mAssertionError[22m: expected [] to include 'AttrCat-1763452582736'[39m
api test: [36m [2mâ¯[22m tests/integration/attribute.test.ts:[2m52:10[22m[39m
api test:     [90m 50| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m 51| [39m        [33m.[39m[34mexpect[39m([34m201[39m)
api test:     [90m 52| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m   | [39m         [31m^[39m
api test:     [90m 53| [39m          [35mconst[39m apiResult [33m=[39m res[33m.[39mbody [35mas[39m [33mAttribute[39m
api test:     [90m 54| [39m          const categoriesNames = apiResult.categories?.map(cat => catâ€¦
api test: [90m [2mâ¯[22m tests/integration/attribute.test.ts:[2m58:35[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mAttribute API Integration Tests[2m > [22mGET /api/attributes[2m > [22mshould get all attributes
api test: [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'id')[39m
api test: [36m [2mâ¯[22m tests/integration/attribute.test.ts:[2m91:10[22m[39m
api test:     [90m 89| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m 90| [39m        [33m.[39m[34mexpect[39m([34m200[39m)
api test:     [90m 91| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m   | [39m         [31m^[39m
api test:     [90m 92| [39m          [34mexpect[39m([33mArray[39m[33m.[39m[34misArray[39m(res[33m.[39mbody))[33m.[39m[34mtoBe[39m([35mtrue[39m)
api test:     [90m 93| [39m          [34mexpect[39m(res[33m.[39mbody[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)
api test: [90m [2mâ¯[22m tests/integration/attribute.test.ts:[2m98:43[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mAttribute API Integration Tests[2m > [22mGET /api/attributes/:id[2m > [22mshould get attribute by id
api test: [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'id')[39m
api test: [36m [2mâ¯[22m tests/integration/attribute.test.ts:[2m122:55[22m[39m
api test:     [90m120| [39m    [34mit[39m([32m'should get attribute by id'[39m[33m,[39m [35masync[39m () [33m=>[39m {
api test:     [90m121| [39m      [35mawait[39m [34mrequest[39m(app)
api test:     [90m122| [39m        [33m.[39m[35mget[39m([32m`[39m[36m${[39m[33mATTRIBUTES_BASE_PATH[39m[36m}[39m[32m/[39m[36m${[39mtestAttribute[33m.[39mid[36m}[39m[32m`[39m)
api test:     [90m   | [39m                                                      [31m^[39m
api test:     [90m123| [39m        [33m.[39m[35mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer [39m[36m${[39mtestAuthToken[36m}[39m[32m`[39m)
api test:     [90m124| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mAttribute API Integration Tests[2m > [22mPUT /api/attributes/:id[2m > [22mshould update an attribute
api test: [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'id')[39m
api test: [36m [2mâ¯[22m tests/integration/attribute.test.ts:[2m156:55[22m[39m
api test:     [90m154| [39m      [35mconst[39m updatedValues [33m=[39m [[32m'Updated value 1'[39m[33m,[39m [32m'Updated value 2'[39m]
api test:     [90m155| [39m      [35mawait[39m [34mrequest[39m(app)
api test:     [90m156| [39m        [33m.[39m[34mput[39m([32m`[39m[36m${[39m[33mATTRIBUTES_BASE_PATH[39m[36m}[39m[32m/[39m[36m${[39mtestAttribute[33m.[39mid[36m}[39m[32m`[39m)
api test:     [90m   | [39m                                                      [31m^[39m
api test:     [90m157| [39m        [33m.[39m[35mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer [39m[36m${[39mtestAuthToken[36m}[39m[32m`[39m)
api test:     [90m158| [39m        [33m.[39m[34msend[39m({ values[33m:[39m updatedValues })
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mAttribute API Integration Tests[2m > [22mPUT /api/attributes/:id[2m > [22mshould fail to update a non-existent attribute
api test: [31m[1mError[22m: expected 404 "Not Found", got 400 "Bad Request"[39m
api test: [36m [2mâ¯[22m tests/integration/attribute.test.ts:[2m178:10[22m[39m
api test:     [90m176| [39m        [33m.[39m[34msend[39m({ description[33m:[39m [32m'Should not work'[39m })
api test:     [90m177| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m178| [39m        [33m.[39m[34mexpect[39m([34m404[39m)
api test:     [90m   | [39m         [31m^[39m
api test:     [90m179| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m180| [39m          [35mconst[39m apiError [33m=[39m res[33m.[39mbody [35mas[39m [33mAPIError[39m
api test: [90m [2mâ¯[22m Test._assertStatus ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m309:14[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/category.test.ts[2m > [22mAttribute API Integration Tests[2m > [22mDELETE /api/attributes/:id[2m > [22mshould delete an attribute
api test: [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'id')[39m
api test: [36m [2mâ¯[22m tests/integration/attribute.test.ts:[2m191:58[22m[39m
api test:     [90m189| [39m    [34mit[39m([32m'should delete an attribute'[39m[33m,[39m [35masync[39m () [33m=>[39m {
api test:     [90m190| [39m      [35mawait[39m [34mrequest[39m(app)
api test:     [90m191| [39m        [33m.[39m[35mdelete[39m([32m`[39m[36m${[39m[33mATTRIBUTES_BASE_PATH[39m[36m}[39m[32m/[39m[36m${[39mtestAttribute[33m.[39mid[36m}[39m[32m`[39m)
api test:     [90m   | [39m                                                         [31m^[39m
api test:     [90m192| [39m        [33m.[39m[35mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer [39m[36m${[39mtestAuthToken[36m}[39m[32m`[39m)
api test:     [90m193| [39m        [33m.[39m[34mexpect[39m([34m204[39m)
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/item.test.ts[2m > [22mCategory API Integration Tests[2m > [22mGET /api/categories[2m > [22mshould return all categories
api test: [31m[1mAssertionError[22m: expected 'RatedCat-1763452583771' to contain 'Test-Category-'[39m
api test: Expected: [32m"Test-Category-"[39m
api test: Received: [31m"RatedCat-1763452583771"[39m
api test: [36m [2mâ¯[22m tests/integration/category.test.ts:[2m171:10[22m[39m
api test:     [90m169| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m170| [39m        [33m.[39m[34mexpect[39m([34m200[39m)
api test:     [90m171| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m   | [39m         [31m^[39m
api test:     [90m172| [39m          [34mexpect[39m([33mArray[39m[33m.[39m[34misArray[39m(res[33m.[39mbody))[33m.[39m[34mtoBe[39m([35mtrue[39m)
api test:     [90m173| [39m          [34mexpect[39m(res[33m.[39mbody[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m3[39m)
api test: [90m [2mâ¯[22m tests/integration/category.test.ts:[2m178:34[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/57]âŽ¯[22m[39m
api test: [41m[1m FAIL [22m[49m tests/integration/ratings.test.ts[2m > [22mCategory API Integration Tests[2m > [22mGET /api/categories[2m > [22mshould return all categories
api test: [31m[1mAssertionError[22m: expected 'ItemCat-1763452585653' to contain 'Test-Category-'[39m
api test: Expected: [32m"Test-Category-"[39m
api test: Received: [31m"ItemCat-1763452585653"[39m
api test: [36m [2mâ¯[22m tests/integration/category.test.ts:[2m171:10[22m[39m
api test:     [90m169| [39m        [33m.[39m[34mexpect[39m([32m'Content-Type'[39m[33m,[39m [36m/json/[39m)
api test:     [90m170| [39m        [33m.[39m[34mexpect[39m([34m200[39m)
api test:     [90m171| [39m        [33m.[39m[34mexpect[39m(res [33m=>[39m {
api test:     [90m   | [39m         [31m^[39m
api test:     [90m172| [39m          [34mexpect[39m([33mArray[39m[33m.[39m[34misArray[39m(res[33m.[39mbody))[33m.[39m[34mtoBe[39m([35mtrue[39m)
api test:     [90m173| [39m          [34mexpect[39m(res[33m.[39mbody[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m3[39m)
api test: [90m [2mâ¯[22m tests/integration/category.test.ts:[2m178:34[22m[39m
api test: [90m [2mâ¯[22m ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m365:13[22m[39m
api test: [90m [2mâ¯[22m Test._assertFunction ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m342:13[22m[39m
api test: [90m [2mâ¯[22m Test.assert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m195:23[22m[39m
api test: [90m [2mâ¯[22m localAssert ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m138:14[22m[39m
api test: [90m [2mâ¯[22m Server.<anonymous> ../node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:[2m152:11[22m[39m
api test: [31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/57]âŽ¯[22m[39m
api test: [2m Test Files [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m3 passed[39m[22m[90m (7)[39m
api test: [2m      Tests [22m [1m[31m50 failed[39m[22m[2m | [22m[1m[32m68 passed[39m[22m[2m | [22m[33m63 skipped[39m[90m (181)[39m
api test: [2m   Start at [22m 07:56:17
api test: [2m   Duration [22m 10.68s[2m (transform 174ms, setup 0ms, collect 4.50s, tests 1.08s, environment 1ms, prepare 71ms)[22m
api test: Database connection closed after tests
api test: Failed
/workspaces/rate-my-everything/api:
â€‰ERR_PNPM_RECURSIVE_RUN_FIRST_FAILâ€‰ @cristiadu/rate-my-everything-api@1.0.0 test: `vitest run`
Exit status 1
â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
